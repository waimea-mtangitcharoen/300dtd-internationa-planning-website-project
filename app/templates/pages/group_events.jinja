{#=====================================================
  Thing page
  - Shows details of a single thing
  - Has a delete link to remove it
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Events for Group {{ group.name }}

{% endblock %}

{% block menu %}

    <label role="button" for="menu_toggle">&#9776;</label>
    <input id="menu_toggle" type="checkbox">

    <ul class="nav-panel">
    
      <li><label for="menu_toggle">&#10005;</label></li>
      <li><a href="/group/new" class="menu">Create</a></li>
      <li><a href="/group/join" class="menu">Join</a></li>
      <li><a href="/group/{{ group.id }}/newevent" class="menu">Create Event</a></li>

      {% if session.user_id %}
        <li><a href="/logout">Logout</a></li>

      {% else %}
      
      {% endif %}

    </ul>

{% endblock %}


{% block content %}

  <article>

    <h1>

      Group {{ group.name }}
      <a href="/group/{{ group.id }}?sort=date" role="button">Soon</a>   
      <a href="/group/{{ group.id }}?sort=recent" role="button">Recent</a>
    
    </h1>

    <p>current_user_id: {{ session["user_id"] }} | group.owner: {{ group.owner }}</p>

    <table>
        <thead>
            <tr>
                <th>Event</th>
                <th>Date</th>
                <th></th>
            </tr>
        </thead>

        <tbody>
        

        {% for event in events %}

            <tr>
                <td><strong>{{ event.name }}</strong></td>
                <td>{{ event.date }}</td>
                <td><a href="/event/{{ event.id }}" role="button">View</a>
                {% if session["user_id"] == group.owner %}
                  <td><a href="/delete/event/{{ event.id }}" role="">D</a></td>
                {% endif %}
            </tr>

        {% else %}

            <p>None!</p>

        {% endfor %}
        </tbody>
    </table>

  </article>


    <a role="button" href="/">Back to groups</a>

{% endblock %}